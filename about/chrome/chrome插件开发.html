<!DOCTYPE html>
<html lang="ZH">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>chrome插件开发 | phr技术博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content=" ">
    
    <link rel="preload" href="/assets/css/0.styles.b10b5fb3.css" as="style"><link rel="preload" href="/assets/js/app.6365c275.js" as="script"><link rel="preload" href="/assets/js/2.f728fa66.js" as="script"><link rel="preload" href="/assets/js/11.49b33569.js" as="script"><link rel="preload" href="/assets/js/13.35cba3fc.js" as="script"><link rel="prefetch" href="/assets/js/10.93260224.js"><link rel="prefetch" href="/assets/js/100.f6b8ec7d.js"><link rel="prefetch" href="/assets/js/101.967b6c5a.js"><link rel="prefetch" href="/assets/js/102.21711343.js"><link rel="prefetch" href="/assets/js/103.d49ec33e.js"><link rel="prefetch" href="/assets/js/104.977a3b03.js"><link rel="prefetch" href="/assets/js/105.b99482a1.js"><link rel="prefetch" href="/assets/js/106.e4a47e6c.js"><link rel="prefetch" href="/assets/js/107.0fbdc788.js"><link rel="prefetch" href="/assets/js/108.3c5b4338.js"><link rel="prefetch" href="/assets/js/109.3684a685.js"><link rel="prefetch" href="/assets/js/110.baed003e.js"><link rel="prefetch" href="/assets/js/111.83769994.js"><link rel="prefetch" href="/assets/js/112.946c5f99.js"><link rel="prefetch" href="/assets/js/12.a36537bf.js"><link rel="prefetch" href="/assets/js/14.0e48b2e5.js"><link rel="prefetch" href="/assets/js/15.e55cd707.js"><link rel="prefetch" href="/assets/js/16.f872fbeb.js"><link rel="prefetch" href="/assets/js/17.f7a4d99b.js"><link rel="prefetch" href="/assets/js/18.ba229207.js"><link rel="prefetch" href="/assets/js/19.92de1ede.js"><link rel="prefetch" href="/assets/js/20.3188b6de.js"><link rel="prefetch" href="/assets/js/21.720e9417.js"><link rel="prefetch" href="/assets/js/22.fa36b946.js"><link rel="prefetch" href="/assets/js/23.ef58e05b.js"><link rel="prefetch" href="/assets/js/24.881d6b82.js"><link rel="prefetch" href="/assets/js/25.8af9bcbe.js"><link rel="prefetch" href="/assets/js/26.43432835.js"><link rel="prefetch" href="/assets/js/27.0f7b8718.js"><link rel="prefetch" href="/assets/js/28.a0c57751.js"><link rel="prefetch" href="/assets/js/29.c1658d5b.js"><link rel="prefetch" href="/assets/js/3.1568aedc.js"><link rel="prefetch" href="/assets/js/30.c4fc88ff.js"><link rel="prefetch" href="/assets/js/31.1fc1fc07.js"><link rel="prefetch" href="/assets/js/32.d63a6056.js"><link rel="prefetch" href="/assets/js/33.8b8854ed.js"><link rel="prefetch" href="/assets/js/34.7f7a6517.js"><link rel="prefetch" href="/assets/js/35.1628cb9c.js"><link rel="prefetch" href="/assets/js/36.3703f0c9.js"><link rel="prefetch" href="/assets/js/37.9a8be999.js"><link rel="prefetch" href="/assets/js/38.1bad6e08.js"><link rel="prefetch" href="/assets/js/39.887115b5.js"><link rel="prefetch" href="/assets/js/4.529cb57e.js"><link rel="prefetch" href="/assets/js/40.cb099c93.js"><link rel="prefetch" href="/assets/js/41.b39ca612.js"><link rel="prefetch" href="/assets/js/42.6a0ec8ac.js"><link rel="prefetch" href="/assets/js/43.de1b9001.js"><link rel="prefetch" href="/assets/js/44.133a895c.js"><link rel="prefetch" href="/assets/js/45.1961312a.js"><link rel="prefetch" href="/assets/js/46.971341f1.js"><link rel="prefetch" href="/assets/js/47.7bc2173e.js"><link rel="prefetch" href="/assets/js/48.5d895a7e.js"><link rel="prefetch" href="/assets/js/49.638058f6.js"><link rel="prefetch" href="/assets/js/5.387bf8e2.js"><link rel="prefetch" href="/assets/js/50.e742ad4c.js"><link rel="prefetch" href="/assets/js/51.5d94ed5f.js"><link rel="prefetch" href="/assets/js/52.55a51aaa.js"><link rel="prefetch" href="/assets/js/53.1ba60b2b.js"><link rel="prefetch" href="/assets/js/54.73a995e7.js"><link rel="prefetch" href="/assets/js/55.4e018c53.js"><link rel="prefetch" href="/assets/js/56.6cb78c59.js"><link rel="prefetch" href="/assets/js/57.563d5c97.js"><link rel="prefetch" href="/assets/js/58.f8954d6d.js"><link rel="prefetch" href="/assets/js/59.3d2a7fdb.js"><link rel="prefetch" href="/assets/js/6.a279f8e6.js"><link rel="prefetch" href="/assets/js/60.5a3e1e46.js"><link rel="prefetch" href="/assets/js/61.7e804132.js"><link rel="prefetch" href="/assets/js/62.e5287e80.js"><link rel="prefetch" href="/assets/js/63.be538378.js"><link rel="prefetch" href="/assets/js/64.317aebd1.js"><link rel="prefetch" href="/assets/js/65.7643d336.js"><link rel="prefetch" href="/assets/js/66.9b0f8d09.js"><link rel="prefetch" href="/assets/js/67.756bb42b.js"><link rel="prefetch" href="/assets/js/68.c56721fc.js"><link rel="prefetch" href="/assets/js/69.5f86f31b.js"><link rel="prefetch" href="/assets/js/7.0f2b711c.js"><link rel="prefetch" href="/assets/js/70.417864a8.js"><link rel="prefetch" href="/assets/js/71.4aee4693.js"><link rel="prefetch" href="/assets/js/72.c013fc2a.js"><link rel="prefetch" href="/assets/js/73.50ca59ad.js"><link rel="prefetch" href="/assets/js/74.b627791d.js"><link rel="prefetch" href="/assets/js/75.f5879061.js"><link rel="prefetch" href="/assets/js/76.e7be1127.js"><link rel="prefetch" href="/assets/js/77.aafb8bbb.js"><link rel="prefetch" href="/assets/js/78.0f2b7ba1.js"><link rel="prefetch" href="/assets/js/79.ee2c7dff.js"><link rel="prefetch" href="/assets/js/8.fbc348ff.js"><link rel="prefetch" href="/assets/js/80.d0d7ac73.js"><link rel="prefetch" href="/assets/js/81.e10b54fc.js"><link rel="prefetch" href="/assets/js/82.03db26fd.js"><link rel="prefetch" href="/assets/js/83.89bcaab3.js"><link rel="prefetch" href="/assets/js/84.e3c968c0.js"><link rel="prefetch" href="/assets/js/85.8d36c455.js"><link rel="prefetch" href="/assets/js/86.2d239c5d.js"><link rel="prefetch" href="/assets/js/87.0bc771d9.js"><link rel="prefetch" href="/assets/js/88.f8a1db97.js"><link rel="prefetch" href="/assets/js/89.1671c085.js"><link rel="prefetch" href="/assets/js/9.600c48e6.js"><link rel="prefetch" href="/assets/js/90.6a7cb76f.js"><link rel="prefetch" href="/assets/js/91.96dda1bd.js"><link rel="prefetch" href="/assets/js/92.defa3643.js"><link rel="prefetch" href="/assets/js/93.1a469c8a.js"><link rel="prefetch" href="/assets/js/94.d9b30b49.js"><link rel="prefetch" href="/assets/js/95.3b10c597.js"><link rel="prefetch" href="/assets/js/96.ee7c131a.js"><link rel="prefetch" href="/assets/js/97.dbf5d04e.js"><link rel="prefetch" href="/assets/js/98.60f0f169.js"><link rel="prefetch" href="/assets/js/99.58cbe020.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b10b5fb3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">phr技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/about/project/项目总结.html" class="nav-link">
  项目经历
</a></div><div class="nav-item"><a href="/about/project/微前端.html" class="nav-link">
  微前端
</a></div><div class="nav-item"><a href="/about/project/性能监控.html" class="nav-link">
  性能监控
</a></div><div class="nav-item"><a href="/about/project/小程序架构设计.html" class="nav-link">
  小程序架构
</a></div><div class="nav-item"><a href="/about/vue/newVue时候都做了什么.html" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/about/question/vue.html" class="nav-link">
  常见考点
</a></div><div class="nav-item"><a href="/about/nature/性能优化知识体系.html#从原理到实践-各个击破" class="nav-link">
  性能优化
</a></div> <a href="https://github.com/18722696161" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/about/project/项目总结.html" class="nav-link">
  项目经历
</a></div><div class="nav-item"><a href="/about/project/微前端.html" class="nav-link">
  微前端
</a></div><div class="nav-item"><a href="/about/project/性能监控.html" class="nav-link">
  性能监控
</a></div><div class="nav-item"><a href="/about/project/小程序架构设计.html" class="nav-link">
  小程序架构
</a></div><div class="nav-item"><a href="/about/vue/newVue时候都做了什么.html" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/about/question/vue.html" class="nav-link">
  常见考点
</a></div><div class="nav-item"><a href="/about/nature/性能优化知识体系.html#从原理到实践-各个击破" class="nav-link">
  性能优化
</a></div> <a href="https://github.com/18722696161" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue2</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WebPack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Http</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>区块链</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端遇到的问题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>日志及监控</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>chrome插件开发</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/about/chrome/chrome插件开发.html" class="active sidebar-link">chrome插件开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#chrome开发步骤" class="sidebar-link">chrome开发步骤</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#具体开发步骤例子-贴吧自动签到" class="sidebar-link">具体开发步骤例子：贴吧自动签到</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#发布chrome插件的步骤" class="sidebar-link">发布Chrome插件的步骤</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#开发完的文件需要打包成ctx文件" class="sidebar-link">开发完的文件需要打包成ctx文件</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#例子-mac中" class="sidebar-link">例子：mac中</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#报错解决方式" class="sidebar-link">报错解决方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#终端启动报错" class="sidebar-link">终端启动报错：</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#bashrc文件含义和问题" class="sidebar-link">.bashrc文件含义和问题</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#签名报错" class="sidebar-link">签名报错</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#已生成ctx文件后-拖拽进扩展程序报错" class="sidebar-link">已生成ctx文件后，拖拽进扩展程序报错</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#开发阶段引入的扩展程序应该是什么样的文件呢" class="sidebar-link">开发阶段引入的扩展程序应该是什么样的文件呢</a></li><li class="sidebar-sub-header"><a href="/about/chrome/chrome插件开发.html#加载插件报错" class="sidebar-link">加载插件报错</a></li></ul></li></ul></li><li><a href="/about/chrome/贴吧自动签到插件开发.html" class="sidebar-link">贴吧自动签到插件开发</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chrome插件开发"><a href="#chrome插件开发" class="header-anchor">#</a> chrome插件开发</h1> <h2 id="chrome开发步骤"><a href="#chrome开发步骤" class="header-anchor">#</a> chrome开发步骤</h2> <ol><li><p>了解Chrome插件的基础知识：在开发Chrome插件之前，需要先了解Chrome插件的基本知识和概念。可以在Google开发者文档中找到相关的介绍和文档。</p></li> <li><p>创建插件清单文件（manifest.json）：插件清单文件是插件的核心文件，定义了插件的名称、版本、权限、页面等。必须创建一个manifest.json文件，并将其保存在插件根目录下。</p></li> <li><p>编写HTML、CSS和JavaScript代码：Chrome插件的UI通常是基于HTML和CSS开发的，逻辑是基于JavaScript编写的。开发人员可以根据自己的需求编写相应的代码。</p></li> <li><p>加载内容脚本：内容脚本是一种特殊的JavaScript文件，可以在Web页面中注入并与其交互。开发人员可以使用内容脚本扩展Web页面的功能和样式。</p></li> <li><p>添加图标和资源：可以将图标和其他资源添加到插件中，以提供更好的用户体验。</p></li> <li><p>测试和调试：完成代码编写后，需要进行测试和调试。Chrome提供了一些工具来帮助开发人员测试和调试插件，如Chrome DevTools和Chrome浏览器扩展程序。</p></li> <li><p>发布插件：在完成测试和调试后，可以将插件上传到Chrome Web商店并发布。要发布插件，需要注册一个Chrome开发者账户，并遵循一些规则和审核流程。</p></li></ol> <h2 id="具体开发步骤例子-贴吧自动签到"><a href="#具体开发步骤例子-贴吧自动签到" class="header-anchor">#</a> 具体开发步骤例子：贴吧自动签到</h2> <ol><li><p>创建一个名为“manifest.json”的文件，并设置必要的基本信息，如插件名称、版本号、描述、图标等。</p></li> <li><p>创建一个名为“background.js”的文件，该文件将在Chrome后台运行。在该文件中，可以使用Chrome提供的API来监听浏览器事件，并在需要时执行相关的操作。</p></li> <li><p>在“background.js”文件中，使用Chrome提供的API来打开贴吧页面，并模拟用户登录账户。</p></li> <li><p>在登录成功后，使用Chrome提供的API来自动定位到签到按钮，并模拟用户点击按钮完成签到操作。</p></li> <li><p>将签到结果保存到本地存储，以便下次启动插件时进行检查。</p></li> <li><p>创建一个名为“popup.html”的文件，该文件将用于在弹出窗口中显示插件的用户界面。在该文件中，可以使用HTML和CSS来构建用户界面。</p></li> <li><p>在“popup.html”文件中，使用JavaScript编写代码来获取并显示签到结果。</p></li> <li><p>将插件打包成CRX格式的文件，并发布到Chrome Web商店。</p></li></ol> <h2 id="发布chrome插件的步骤"><a href="#发布chrome插件的步骤" class="header-anchor">#</a> 发布Chrome插件的步骤</h2> <p>有以下几个步骤：</p> <ol><li>打包插件
在发布之前，需要将插件代码打包成一个crx文件。可以使用Chrome浏览器自带的打包工具，也可以使用第三方工具，例如crxmake和crx_pack等。以Chrome自带打包工具为例，操作步骤如下：</li></ol> <p>1）将插件代码文件夹命名为“AutoSign-for-Tieba”（插件名），并确保其中包含manifest.json文件和所有的插件代码文件。</p> <p>2）打开Chrome浏览器，点击右上角的菜单按钮，选择“更多工具” -&gt; “扩展程序”。</p> <p>3）在扩展程序页面上，勾选“开发者模式”，然后点击“打包扩展程序”。</p> <p>4）在弹出的对话框中，选择插件代码所在的文件夹，然后点击“打包扩展程序”。</p> <p>5）打包完成后，会生成一个.crx文件和一个.pem文件。其中，.crx文件是插件的安装包，.pem文件是密钥文件，用于后续更新插件。</p> <ol start="2"><li>注册Chrome开发者账号
要发布Chrome插件，需要先注册一个Chrome开发者账号。具体操作步骤如下：</li></ol> <p>1）打开Chrome开发者控制台网站（https://chrome.google.com/webstore/devconsole/）。</p> <p>2）点击右上角的“登录”按钮，然后使用您的Google账号登录。</p> <p>3）在登录后，您会被重定向到开发者控制台首页。在首页上，点击“添加新项目”。</p> <p>4）在添加新项目页面上，填写插件的基本信息，例如名称、描述、类别、语言等。</p> <p>5）在“上传”选项卡中，上传之前打包好的.crx文件。</p> <p>6）在“发布”选项卡中，选择“公开发布”或“受限发布”，并填写相应的信息。</p> <p>7）在“付款”选项卡中，设置付款方式并支付发布费用（目前是$5）。</p> <p>8）发布完成后，您的插件将会被提交审核。审核通过后，插件就可以在Chrome Web Store上免费下载和使用了。</p> <p>请注意，Chrome Web Store审核时间可能会比较长，需要耐心等待。同时，如果您的插件中使用了第三方服务或库，需要确保遵守相应的开源协议和版权规定，否则可能会导致审核失败或侵权问题。</p> <h2 id="开发完的文件需要打包成ctx文件"><a href="#开发完的文件需要打包成ctx文件" class="header-anchor">#</a> 开发完的文件需要打包成ctx文件</h2> <p>如何打包成ctx文件呢？可以按照以下步骤进行操作：</p> <ol><li><p>将插件文件夹压缩成zip文件：将贴吧自动签到插件的所有文件打包成一个zip文件，包括manifest.json、background.js、content_script.js等。</p></li> <li><p>转换成.crx文件：将zip文件的后缀名改为.crx，例如将插件文件夹压缩成的my-plugin.zip改名为my-plugin.crx。</p></li> <li><p>签名CRX文件：Chrome浏览器只允许安装已签名的CRX文件，因此需要对CRX文件进行签名。可以使用Chrome浏览器自带的命令行工具chrome.exe来进行签名。在命令行中输入以下命令：</p></li></ol> <p>window系统中：</p> <div class="language- extra-class"><pre class="language-text"><code>chrome.exe --pack-extension=path/to/unpacked/extension --pack-extension-key=path/to/your/key.pem
</code></pre></div><p>mac系统中：</p> <div class="language- extra-class"><pre class="language-text"><code>google\ chrome --pack-extension=path/to/unpacked/extension --pack-extension-key=path/to/your/key.pem
本人项目的目录为：
Google\ Chrome --pack-extension=/Users/phr/Desktop/project/AutoSignforTieba --pack-extension-key=/Users/phr/Desktop/project/key_pkcs8.pem
</code></pre></div><p>其中，path/to/unpacked/extension是指插件文件夹的路径，path/to/your/key.pem是指您自己生成的私钥文件的路径。如果您还没有生成私钥文件，可以使用以下命令生成：</p> <div class="language- extra-class"><pre class="language-text"><code>openssl genrsa -out key.pem 2048
</code></pre></div><p>这将在当前目录下生成一个2048位的RSA私钥文件key.pem。</p> <p>注意：path/to/unpacked/extension 指的是未打包的扩展程序的路径，也就是未压缩成 CRX 格式的扩展程序文件夹所在的路径。在开发扩展程序时，通常使用未打包的扩展程序进行调试和测试，而在发布扩展程序时，则需要将扩展程序打包成 CRX 格式。因此，在使用 google\ chrome 命令安装未打包的扩展程序时，需要指定未打包的扩展程序文件夹的路径，而不是 CRX 文件的路径。</p> <ol start="4"><li>安装签名后的CRX文件：签名后，会在插件文件夹的同级目录下生成一个新的CRX文件，例如my-plugin.crx。在Chrome浏览器中打开“扩展程序”页面，将CRX文件拖入页面中即可安装。</li></ol> <p>注意：上述的执行命令中需要把chrome浏览器加入到环境变量中才可以执行命令</p> <p>如果出现报错：</p> <div class="language- extra-class"><pre class="language-text"><code>command not found: google-chrome
</code></pre></div><p>说明命令打的不对</p> <div class="language- extra-class"><pre class="language-text"><code>google-chrome --pack-extension=path/to/unpacked/extension --pack-extension-key=path/to/your/key.pem
</code></pre></div><p>这样的话就会报错，把’-‘换成’\‘就可以了，转义一下</p> <h2 id="例子-mac中"><a href="#例子-mac中" class="header-anchor">#</a> 例子：mac中</h2> <ol><li><p>打开终端应用程序。</p></li> <li><p>输入以下命令，将 Chrome 浏览器的路径添加到 PATH 环境变量中：</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>export PATH=&quot;/Applications/Google Chrome.app/Contents/MacOS:$PATH&quot;
</code></pre></div><p>其中 &quot;/Applications/Google Chrome.app/Contents/MacOS&quot; 是 Chrome 浏览器的路径，可以根据实际情况进行修改。</p> <ol start="3"><li>如果您希望每次启动终端应用程序时都自动添加 Chrome 浏览器的路径到 PATH 环境变量中，可以将上述命令添加到终端应用程序的配置文件中。打开终端应用程序，输入以下命令：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>nano ~/.bash_profile
</code></pre></div><p>这将打开一个文本编辑器，您可以在其中添加上述命令，然后按下 Ctrl + X，输入 Y 确认保存，再按下 Enter 退出编辑器。</p> <ol start="4"><li>最后，需要重启终端应用程序，以使 PATH 环境变量的修改生效。
如果您希望在脚本中使用 Chrome 浏览器的命令，可以使用以下代码来执行命令：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>#!/bin/bash

# 将 Chrome 浏览器的路径添加到 PATH 环境变量中
export PATH=&quot;/Applications/Google Chrome.app/Contents/MacOS:$PATH&quot;

# 在 Chrome 浏览器中打开指定网页
google-chrome https://www.google.com
</code></pre></div><p>其中 google-chrome 命令用于在 Chrome 浏览器中打开指定网页，而 $PATH 可以访问 PATH 环境变量中的路径。</p> <h2 id="报错解决方式"><a href="#报错解决方式" class="header-anchor">#</a> 报错解决方式</h2> <h3 id="终端启动报错"><a href="#终端启动报错" class="header-anchor">#</a> 终端启动报错：</h3> <div class="language- extra-class"><pre class="language-text"><code>/Users/phr/.bash_profile:source:1: no such file or directory: /Users/phr/.bashrc
</code></pre></div><p>这个错误提示表明在执行 source 命令时找不到 .bashrc 文件。一般情况下，.bashrc 文件是在用户的 home 目录下存放的，而且默认情况下，MacOS 并不会自动创建该文件，所以您需要手动创建该文件。</p> <p>如果您已经手动创建了 .bashrc 文件，那么可能是文件路径设置错误，您可以检查一下文件路径是否正确。</p> <p>如果您不需要使用 .bashrc 文件，可以直接在 .bash_profile 文件中设置环境变量，而不需要使用 source 命令来加载 .bashrc 文件。例如，可以在 .bash_profile 文件中添加以下内容：</p> <div class="language- extra-class"><pre class="language-text"><code>export PATH=&quot;/Applications/Google Chrome.app/Contents/MacOS:$PATH&quot;
</code></pre></div><h3 id="bashrc文件含义和问题"><a href="#bashrc文件含义和问题" class="header-anchor">#</a> .bashrc文件含义和问题</h3> <p>.bashrc 文件是 Bash shell 在启动时会自动执行的一个脚本文件，它可以用于设置 Bash shell 的一些配置和环境变量。</p> <p>在 Mac 系统中，由于默认使用的是 Bash shell，因此可以通过创建 .bashrc 文件来配置环境变量。创建 .bashrc 文件的步骤如下：
.bashrc 文件通常位于用户的 home 目录下，其完整路径为 ~/.bashrc。在终端中可以使用 ls -a 命令显示所有文件和文件夹，包括隐藏的文件和文件夹，来查找 .bashrc 文件。您可以在终端中输入以下命令来查找 .bashrc 文件的位置：</p> <ol><li><p>打开终端应用程序（Terminal）；</p></li> <li><p>在终端中输入以下命令来创建一个新的 .bashrc 文件：</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>touch ~/.bashrc
</code></pre></div><p>这将在用户的 home 目录下创建一个名为 .bashrc 的空文件。</p> <ol start="3"><li>使用任意文本编辑器打开 .bashrc 文件，例如：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>nano ~/.bashrc
</code></pre></div><p>这将在终端中打开一个新的 Nano 编辑器窗口，并显示 .bashrc 文件的内容（因为此时该文件还是空文件）。</p> <ol start="4"><li>在 .bashrc 文件中添加需要设置的环境变量或 Bash 配置，例如：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>export PATH=&quot;/Applications/Google Chrome.app/Contents/MacOS:$PATH&quot;
</code></pre></div><p>这将把 Chrome 浏览器的执行文件目录添加到系统的 PATH 环境变量中。</p> <ol start="5"><li>保存并退出 .bashrc 文件：</li></ol> <ul><li>在 Nano 编辑器中，可以按 Ctrl+X 键，然后按 Y 键确认保存修改；</li> <li>在其他文本编辑器中，保存文件并关闭编辑器即可。</li></ul> <ol start="6"><li>在终端中使用以下命令重新加载 .bashrc 文件：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>source ~/.bashrc
</code></pre></div><p>这将使 Bash shell 重新加载 .bashrc 文件，并使其中的环境变量和配置生效。</p> <p>以上是在 Mac 系统中创建 .bashrc 文件并设置环境变量的步骤。需要注意的是，如果您的系统默认使用的不是 Bash shell，那么您可能需要创建其他类型的 shell 配置文件，例如 .zshrc（用于 Zsh shell）。</p> <h3 id="签名报错"><a href="#签名报错" class="header-anchor">#</a> 签名报错</h3> <p>上述生成ctx签名报错：:ERROR:chrome_main_delegate.cc(490)] Input value for private key must be a valid format (PKCS#8-format PEM-encoded RSA key).
注意：这个错误可能是由于你的密钥文件格式不正确导致的。在使用 --pack-extension-key 参数时，需要使用 PKCS#8 格式的 PEM 编码 RSA 密钥，确保你的密钥文件是正确的格式。</p> <p>你可以使用以下命令将已有的密钥文件转换为正确的格式：</p> <div class="language- extra-class"><pre class="language-text"><code>openssl pkcs8 -topk8 -inform PEM -outform PEM -in path/to/your/key.pem -out path/to/your/key_pkcs8.pem -nocrypt
</code></pre></div><p>转换后的 key_pkcs8.pem 文件即可作为 --pack-extension-key 参数的值。重新执行生成 CRX 文件的命令，应该就不会出现相应的错误了。
<img src="/assets/img/youhua27.5750a112.png"></p> <h3 id="已生成ctx文件后-拖拽进扩展程序报错"><a href="#已生成ctx文件后-拖拽进扩展程序报错" class="header-anchor">#</a> 已生成ctx文件后，拖拽进扩展程序报错</h3> <p>上述已经生成ctx文件，然后拖拽到chrome扩展程序中，提示：该扩展程序未列在 Chrome 应用商店中，并可能是在您不知情的情况下添加的</p> <p>这是因为Chrome Web Store要求所有的扩展都必须在商店中列出，并且需要审核通过之后才能在Chrome浏览器中安装。如果您想在Chrome浏览器中安装自己开发的扩展程序，可以通过以下步骤：</p> <p>打开 Chrome 浏览器，点击地址栏中的“三个点”按钮，在弹出的下拉菜单中选择“更多工具” &gt; “扩展程序”。</p> <p>在扩展程序页面中，打开“开发者模式”，点击“加载已解压的扩展程序”按钮，选择您生成的CRX文件所在的文件夹，点击“选择文件夹”按钮。</p> <p>此时您的扩展程序已经添加到了Chrome浏览器中，您可以在扩展程序页面中管理和使用它。</p> <p>需要注意的是，由于未在Chrome Web Store中发布的扩展程序可能存在安全风险，所以谨慎使用未知来源的扩展程序。</p> <h3 id="开发阶段引入的扩展程序应该是什么样的文件呢"><a href="#开发阶段引入的扩展程序应该是什么样的文件呢" class="header-anchor">#</a> 开发阶段引入的扩展程序应该是什么样的文件呢</h3> <p>当你在Chrome扩展程序中添加一个扩展时，你需要选择的文件而不是未压缩成ctx的文件（也就是开发的项目的包）。生成ctx文件的目的是为了使你的扩展程序更加安全，因为它包含了一个私钥，该私钥用于签名扩展程序。因此，当你在Chrome中添加一个扩展程序时，应该选择已经签名的ctx文件。</p> <img src="/assets/img/youhua25.c41c3a30.png"> <img src="/assets/img/youhua26.6d955fd0.png"> <h3 id="加载插件报错"><a href="#加载插件报错" class="header-anchor">#</a> 加载插件报错</h3> <ol><li><p>上述中加载插件之后报错：Manifest version 2 is deprecated, and support will be removed in 2023. See https://developer.chrome.com/blog/mv2-transition/ for more details.
原因是：上述报错是由于 Manifest Version 2 已经被弃用，官方计划在2023年底之前彻底移除对 Manifest Version 2 的支持。因此，建议将插件升级到 Manifest Version 3。
升级 Manifest 版本需要修改 manifest.json 文件的格</p></li> <li><p>上述中加载插件之后报错：Manifest version 2 is deprecated, and support will be removed in 2023. See https://developer.chrome.com/blog/mv2-transition/ for more details.
这个错误是因为使用的 manifest.json 文件是版本 2 的格式，但是从 2023 年起，Chrome 将不再支持 Manifest version 2 的扩展程序。</p></li></ol> <p>要解决这个问题，您需要更新您的扩展程序以使用 Manifest version 3。Manifest version 3 引入了一些新的 API 和更强的隐私保护机制。</p> <p>以下是一个 Manifest version 3 的 manifest.json 示例：</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;manifest_version&quot;: 3,
  &quot;name&quot;: &quot;My Extension&quot;,
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;description&quot;: &quot;This is my extension&quot;,
  &quot;icons&quot;: {
    &quot;16&quot;: &quot;icon16.png&quot;,
    &quot;48&quot;: &quot;icon48.png&quot;,
    &quot;128&quot;: &quot;icon128.png&quot;
  },
  &quot;action&quot;: {
    &quot;default_popup&quot;: &quot;popup.html&quot;
  },
  &quot;permissions&quot;: [&quot;tabs&quot;]
}
</code></pre></div><p>请注意，Manifest version 3 与 Manifest version 2 有很多不同之处，包括：</p> <ul><li>不支持 inline scripts 和 eval()</li> <li>不支持 background.html 或 background page</li> <li>不支持 content script 和 page script 之间的通信
因此，在将您的扩展程序从 Manifest version 2 升级到 Manifest version 3 时，您需要仔细阅读官方文档并做好充分的准备工作。</li></ul> <p>另外，尽管 Manifest version 2 在未来将不再受支持，但它仍然是目前大多数扩展程序使用的版本，并且仍然可以在 Chrome 上运行。</p> <ol start="3"><li>上述中加载插件之后报错：Refused to execute inline script because it violates the following Content Security Policy directive: &quot;script-src 'self'&quot;. Either the 'unsafe-inline' keyword, a hash ('sha256-jcjHcq5sT0+sWwyCSo8BdEmbTqEr2WSQ/rE4CzJH+Ew='), or a nonce ('nonce-...') is required to enable inline execution.</li></ol> <p>这个错误是由于扩展程序中的某些脚本被阻止执行，因为它们违反了浏览器的内容安全策略（CSP）指令。CSP是一个安全功能，可帮助保护网站免受跨站点脚本（XSS）等攻击。</p> <p>要解决这个问题，可以在manifest.json文件中的&quot;content_security_policy&quot;字段中添加必要的指令来解决此问题。例如，添加以下指令以允许内联脚本：</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;content_security_policy&quot;: &quot;script-src 'self' 'unsafe-inline'; object-src 'self'&quot;
</code></pre></div><p>这里，我们添加了'unsafe-inline'来允许内联脚本执行。在开发扩展时，尽可能避免使用内联脚本或'unsafe-inline'指令，因为这会降低您的扩展程序的安全性。</p> <ol start="4"><li>上述中增加了content_security_policy配置后会报错：:ERROR:chrome_main_delegate.cc(490)] Invalid value for 'content_security_policy'.
如果在 manifest.json 文件中增加了 content_security_policy 配置之后出现了错误，可能是因为该配置没有按照规范进行设置。 content_security_policy 的值应该是一个字符串，包含一个或多个指令，每个指令之间使用分号 ; 分隔。</li></ol> <p>以下是一个示例 content_security_policy 配置：</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;content_security_policy&quot;: {
    &quot;extension_pages&quot;: &quot;script-src 'self'; object-src 'self'; connect-src https://tieba.baidu.com/;&quot;
  }
</code></pre></div><p>上述配置指定了 default-src、script-src 和 object-src 三个指令，允许加载当前扩展程序的资源，并允许在当前页面中执行 self 源和 unsafe-eval 的脚本。这个配置的作用是防止其他域名的脚本污染扩展程序的页面。</p> <p>请注意，在配置 content_security_policy 时需要仔细考虑每个指令的安全性，以确保扩展程序不会被恶意代码攻击。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/18722696161/edit/master/docs/about/chrome/chrome插件开发.md" target="_blank" rel="noopener noreferrer">在github上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/about/LOGAndMonitor/监控及告警.html" class="prev">
        监控及告警
      </a></span> <span class="next"><a href="/about/chrome/贴吧自动签到插件开发.html">
        贴吧自动签到插件开发
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.6365c275.js" defer></script><script src="/assets/js/2.f728fa66.js" defer></script><script src="/assets/js/11.49b33569.js" defer></script><script src="/assets/js/13.35cba3fc.js" defer></script>
  </body>
</html>
